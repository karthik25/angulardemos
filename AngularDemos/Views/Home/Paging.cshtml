@{
    ViewBag.Title = "Paging";
}

<h2>Paging</h2>

<script data-require="angular.js@1.1.5" data-semver="1.1.5" src="http://code.angularjs.org/1.1.5/angular.min.js"></script>
<script data-require="angular-ui-bootstrap@0.3.0" data-semver="0.3.0" src="http://angular-ui.github.io/bootstrap/ui-bootstrap-tpls-0.3.0.min.js"></script>

<h1>Todos</h1>
<h4>{{todos.length}} remain</h4>
<ul>
    <li ng-repeat="todo in filteredTodos">{{todo.text}}</li>
</ul>
<div data-pagination="" data-num-pages="numPages()"
    data-current-page="currentPage" data-max-size="maxSize"
    data-boundary-links="true">
</div>

<script>
    var todos = angular.module('todos', ['ui.bootstrap']);

    todos.controller('TodoController', function ($scope) {
        $scope.filteredTodos = []
       , $scope.currentPage = 1
       , $scope.numPerPage = 10
       , $scope.maxSize = 5;

        $scope.makeTodos = function () {
            $scope.todos = [];
            for (i = 1; i <= 1000; i++) {
                $scope.todos.push({ text: 'todo ' + i, done: false });
            }
        };
        $scope.makeTodos();

        $scope.numPages = function () {
            return Math.ceil($scope.todos.length / $scope.numPerPage);
        };

        $scope.$watch('currentPage + numPerPage', function () {
            var begin = (($scope.currentPage - 1) * $scope.numPerPage)
            , end = begin + $scope.numPerPage;

            $scope.filteredTodos = $scope.todos.slice(begin, end);
        });
    });
</script>

<div>
    Demo: <a href="http://plnkr.co/edit/6PFCPuFrN6lfGHjHVwGf?p=preview" target="_blank">link</a>
</div>
